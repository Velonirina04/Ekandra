{% extends 'Ekandra/base.html' %}
{% load static %}
{% load bootstrap5 %}
{% load i18n %}

{% block title %}{% trans "Contactez-nous" %}{% endblock %}

{% block content %}
<style>
    /* --- Light Mode Variables (Default) --- */
    :root {
        --light-page-bg: #f5f7fa;
        --light-header-bg-start: #f0f2f5;
        --light-header-bg-end: #e2e4e8;
        --light-text-primary: #1e293b;
        --light-text-secondary: #64748b;
        --light-card-bg: #ffffff;
        --light-card-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
        --light-icon-color: #3b82f6; /* Primary blue for icons */
        --light-link-color: #3b82f6;
        --light-link-hover-color: #2563eb;
        --light-border-color: #e2e8f0;
        --light-heading-color: #1e293b;
        --light-input-bg: #f8fafc;
        --light-input-border: #dee2e6;
        --light-button-bg: #3b82f6;
        --light-button-hover-bg: #2563eb;
        --light-button-shadow: rgba(59, 130, 246, 0.3);

        /* Apply light mode variables by default */
        --page-bg: var(--light-page-bg);
        --header-bg-start: var(--light-header-bg-start);
        --header-bg-end: var(--light-header-bg-end);
        --text-primary: var(--light-text-primary);
        --text-secondary: var(--light-text-secondary);
        --card-bg: var(--light-card-bg);
        --card-shadow: var(--light-card-shadow);
        --icon-color: var(--light-icon-color);
        --link-color: var(--light-link-color);
        --link-hover-color: var(--light-link-hover-color);
        --border-color: var(--light-border-color);
        --heading-color: var(--light-heading-color);
        --input-bg: var(--light-input-bg);
        --input-border: var(--light-input-border);
        --button-bg: var(--light-button-bg);
        --button-hover-bg: var(--light-button-hover-bg);
        --button-shadow: var(--light-button-shadow);
    }

    /* --- Dark Mode Variables (Override for body.dark-mode and system preference) --- */
    body.dark-mode :root, /* For JS toggle */
    @media (prefers-color-scheme: dark) { /* For system preference */
        :root {
            --dark-page-bg: #1a202c;
            --dark-header-bg-start: #2d3748;
            --dark-header-bg-end: #1a202c;
            --dark-text-primary: #f1f5f9;
            --dark-text-secondary: #a0aec0;
            --dark-card-bg: #2d3748;
            --dark-card-shadow: 0 5px 25px rgba(0, 0, 0, 0.5);
            --dark-icon-color: #4361ee; /* Vibrant blue for dark mode icons */
            --dark-link-color: #4361ee;
            --dark-link-hover-color: #6a8cff;
            --dark-border-color: #4a5568;
            --dark-heading-color: #e2e8f0;
            --dark-input-bg: #4a5568;
            --dark-input-border: #6b7280;
            --dark-button-bg: #4361ee;
            --dark-button-hover-bg: #6a8cff;
            --dark-button-shadow: rgba(67, 97, 238, 0.4);

            /* Override general variables with dark mode ones */
            --page-bg: var(--dark-page-bg);
            --header-bg-start: var(--dark-header-bg-start);
            --header-bg-end: var(--dark-header-bg-end);
            --text-primary: var(--dark-text-primary);
            --text-secondary: var(--dark-text-secondary);
            --card-bg: var(--dark-card-bg);
            --card-shadow: var(--dark-card-shadow);
            --icon-color: var(--dark-icon-color);
            --link-color: var(--dark-link-color);
            --link-hover-color: var(--dark-link-hover-color);
            --border-color: var(--dark-border-color);
            --heading-color: var(--dark-heading-color);
            --input-bg: var(--dark-input-bg);
            --input-border: var(--dark-input-border);
            --button-bg: var(--dark-button-bg);
            --button-hover-bg: var(--dark-button-hover-bg);
            --button-shadow: var(--dark-button-shadow);
        }
    }

    /* Global body transition for smooth mode change */
    body {
        transition: background-color 0.3s ease, color 0.3s ease;
        background-color: var(--page-bg);
        color: var(--text-primary);
    }

    /* Header Section */
    .header-section {
        background: linear-gradient(135deg, var(--header-bg-start) 0%, var(--header-bg-end) 100%);
        border-radius: 0 0 20px 20px;
        padding: 4rem 2rem;
        margin-bottom: 3rem;
        text-align: center;
        box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        animation: fadeInDown 0.8s ease-out;
    }

    .header-section h1 {
        font-size: 3.5rem;
        font-weight: 700;
        color: var(--icon-color);
        margin-bottom: 1rem;
    }

    .header-section p {
        font-size: 1.25rem;
        color: var(--text-secondary);
        max-width: 800px;
        margin: 0 auto;
    }

    .header-section .bi-envelope-fill {
        font-size: 3rem;
        color: var(--icon-color);
        margin-right: 15px;
        animation: pulse 2s infinite ease-in-out;
    }

    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }

    /* Contact Form Card */
    .contact-card {
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 15px;
        box-shadow: var(--card-shadow);
        padding: 2.5rem;
        transition: all 0.3s ease;
        animation: fadeInUp 0.8s ease-out 0.2s both;
    }

    .contact-card h2 {
        font-size: 2rem;
        font-weight: 600;
        color: var(--heading-color);
        margin-bottom: 2rem;
        text-align: center;
    }

    .form-label {
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
    }

    .form-control, .form-select {
        border: 1px solid var(--input-border);
        border-radius: 8px;
        padding: 12px 15px;
        transition: all 0.3s;
        background-color: var(--input-bg);
        color: var(--text-primary);
    }

    .form-control::placeholder {
        color: var(--text-secondary);
        opacity: 0.7;
    }

    .form-control:focus, .form-select:focus {
        border-color: var(--icon-color);
        box-shadow: 0 0 0 0.25rem rgba(var(--icon-color-rgb, 59, 130, 246), 0.25); /* Using icon-color for focus */
        background-color: var(--card-bg);
    }
    body.dark-mode .form-control:focus,
    body.dark-mode .form-select:focus {
        box-shadow: 0 0 0 0.25rem rgba(67, 97, 238, 0.25); /* Specific dark mode rgba for focus */
    }

    .send-message-btn {
        background-color: var(--button-bg);
        border-color: var(--button-bg);
        padding: 12px 30px;
        font-weight: 600;
        letter-spacing: 0.5px;
        transition: all 0.3s ease;
        border-radius: 50px;
        color: white;
    }

    .send-message-btn:hover {
        background-color: var(--button-hover-bg);
        border-color: var(--button-hover-bg);
        transform: translateY(-3px);
        box-shadow: 0 8px 20px var(--button-shadow);
    }
    .send-message-btn:active {
        transform: translateY(0);
        box-shadow: 0 4px 10px var(--button-shadow);
    }

    /* Contact Info Section */
    .contact-info-card {
        background-color: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 15px;
        box-shadow: var(--card-shadow);
        padding: 2.5rem;
        margin-top: 2rem;
        animation: fadeInUp 0.8s ease-out 0.4s both;
    }

    .contact-info-card h3 {
        font-size: 1.75rem;
        font-weight: 600;
        color: var(--heading-color);
        margin-bottom: 1.5rem;
        text-align: center;
    }

    .contact-info-card ul {
        list-style: none;
        padding-left: 0;
    }

    .contact-info-card ul li {
        font-size: 1.1rem;
        color: var(--text-primary);
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
    }

    .contact-info-card ul li .bi {
        color: var(--icon-color);
        font-size: 1.5rem;
        margin-right: 15px;
        min-width: 40px; /* Ensure icons align */
        text-align: center;
    }

    .contact-info-card ul li a {
        color: var(--link-color);
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .contact-info-card ul li a:hover {
        color: var(--link-hover-color);
        text-decoration: underline;
    }

    /* Animations */
    @keyframes fadeInDown {
        from { opacity: 0; transform: translateY(-30px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeInUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
        .header-section h1 {
            font-size: 2.5rem;
        }
        .header-section p {
            font-size: 1rem;
        }
        .contact-card, .contact-info-card {
            padding: 1.5rem;
        }
        .contact-card h2 {
            font-size: 1.6rem;
        }
        .contact-info-card h3 {
            font-size: 1.5rem;
        }
    }
</style>

<div class="container my-5">
    {# Header Section #}
    <div class="header-section">
        <h1 class="mb-3">
            <i class="bi bi-envelope-fill me-3"></i>{% trans "Contactez-nous" %}
        </h1>
        <p class="lead">
            {% trans "Nous sommes là pour vous aider ! Remplissez le formulaire ci-dessous ou utilisez nos coordonnées directes pour nous joindre." %}
        </p>
    </div>

    {% comment %} <div class="row justify-content-center">
        {# Contact Form Card #}
        <div class="col-lg-7 mb-4">
            <div class="card contact-card">
                <div class="card-body">
                    <h2>{% trans "Envoyez-nous un Message" %}</h2>
                    <form method="post">
                        {% csrf_token %}
                        {% bootstrap_form form show_help=True %}
                        <div class="d-grid mt-4">
                            <button type="submit" class="btn send-message-btn">
                                <i class="bi bi-send-fill me-2"></i> {% trans "Envoyer le Message" %}
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div> {% endcomment %}

        {# Contact Information Card #}
        <div class="col-lg-5 mb-4">
            <div class="card contact-info-card h-100"> {# h-100 to make it same height as form card #}
                <div class="card-body">
                    <h3>{% trans "Nos Coordonnées" %}</h3>
                    <ul class="list-unstyled">
                        <li><i class="bi bi-geo-alt-fill"></i> {% trans "Adresse: " %} Tsaravava, AntsirabeII, Madagascar</li>
                        <li><i class="bi bi-phone-fill"></i> {% trans "Téléphone: " %}<a href="tel:+2613X XXX XX">+261 32 52 031 38</a></li>
                        <li><i class="bi bi-envelope-fill"></i> {% trans "Email: " %}<a href="mailto: andriamasymarcelo@gmail.com"> andriamasymarcelo@gmail.com</a></li>
                    </ul>
                    <div class="mt-4 text-center">
                        <p class="text-secondary">{% trans "Suivez-nous sur les réseaux sociaux!" %}</p>
                        <a href="#" class="btn btn-outline-secondary me-2"><i class="bi bi-facebook"></i></a>
                        <a href="#" class="btn btn-outline-secondary me-2"><i class="bi bi-github"></i></a>
                        <a href="#" class="btn btn-outline-secondary"><i class="bi bi-linkedin"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
    {# If create_offre.css contains GLOBAL styles, keep it. Otherwise, remove if it's only for the offer creation page. #}
    <link rel="stylesheet" href="{% static 'Ekandra/css/create_offre.css' %}">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
{% endblock %}

{% block extra_js %}
    {% bootstrap_javascript %}
    <script src="{% static 'Ekandra/js/sombre.js' %}"></script>
    {# Add any specific JS for form validation or interactivity here #}
    <script>
        // Example for Bootstrap's form validation (if not globally handled)
        (function () {
            'use strict'
            var forms = document.querySelectorAll('.needs-validation')
            Array.prototype.slice.call(forms)
                .forEach(function (form) {
                    form.addEventListener('submit', function (event) {
                        if (!form.checkValidity()) {
                            event.preventDefault()
                            event.stopPropagation()
                        }
                        form.classList.add('was-validated')
                    }, false)
                })
        })()
    </script>
{% endblock %}